#include <stdio.h>
#include <string.h>
#include <asm/prctl.h>        /* Definition of ARCH_* constants */
#include <sys/syscall.h>      /* Definition of SYS_* constants */
#include <unistd.h>
#include <signal.h>

int main(int argc, char *argv[]) {
	int status;
	int ret = syscall(SYS_arch_prctl, ARCH_SHSTK_STATUS, &status);
	printf("syscall_ret: %d shstk_status: %d\n", ret, status);	

	if (argc == 1) {
		char *xargv[] = {argv[0], "dummy", NULL};
		execve(argv[0], xargv, NULL);
	}

	return 0;
}

